<script src="~/js/Common.js"></script>

<script type="text/javascript">

    $(document).ready(function () {

    });

    function CommonReportGenerateJS(url, data) {
        debugger;
        $(".modalLoader").css("display", "block");
        $.ajax({
            type: "POST",
            url: url,
            data: data,
            error: function (xhr, status, error) {

                CommonAlert(status, error, SubmitPopup, url, "error");
            },
            success: function (response) {
                debugger;
                var contentId = "/" + response.areaName + "/" + response.selectedMenu + "/GenerateReport";
                url = window.location.origin + contentId;

                if (response.errorMessage != null && response.errorMessage != "") {
                    CommonAlert(response.alert, response.errorMessage, null, null, "error");
                }
                $(".modalLoader").hide();
                if (response.report != null) {
                    var x = window.open('', '_blank');
                    x.document.write('<body></body>');
                    x.location.hash = response.selectedMenu;
                    var embedtag = x.document.createElement('embed');
                    embedtag.id = 'reportEmbed';
                    embedtag.src = response.report;
                    embedtag.style = "width:100%; height:100%;";
                    embedtag.alt = "pdf";
                    embedtag.title = "Report";
                    embedtag.type = "application/pdf";
                    embedtag.pluginspage = "http://www.adobe.com/products/acrobat/readstep2.html";
                    x.document.body.appendChild(embedtag);
                    x.document.title = response.selectedMenu;
                }
            }
        });
    }

    $(".ctrlbtn").click(function (e) {

        CommonReportGenerateJS('M1/TECHSCR08/GenerateReport', {
            ReportDate:$("#txtReportDate").val()
        })

        $(".modalLoader").hide();
    })

</script>

<div class="plcholder-cn">
    <form asp-area="M1">
        <div class="plcholder-cn">
            <div class="small-frm">
                <h3 class="sub-heading1"><span>Telex Report</span></h3>
                <div class="m-form">
                    <div class="m-form-bx">
                        <div class="row ">
                            <div class="col-sm-6 col-md-4">
                                <label class="m-lbl1 m-lbl2">Report Date <span style="color:red;">*</span></label>
                            </div>
                            <div class="col-sm-6 col-md-4">
                                <input class="form-control" id="txtReportDate" type="date" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
                            </div>
                        </div>
                        <div class="btn-area1">
                            <input type="submit" id="execute" class="m-btn-1 execute report" value="Execute">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>



<div id="commonModalbinder" class="modal" style="display:none!important;z-index:99999999 !important;"></div>




@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}


